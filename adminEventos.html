<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD de Eventos con Vue.js</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>
    <div id="app">
        <h1>Eventos</h1>

        <h2>Agregar Nuevo Evento</h2>
        <form @submit.prevent="agregarEvento">
            <div class="mb-3">
                <label for="nombre">Nombre: </label>
                <input type="text" id="nombre" v-model="nuevoEvento.nombre" required>
            </div>
            <div class="mb-3">
                <label for="fecha">Fecha: </label>
                <input type="text" id="fecha" v-model="nuevoEvento.fecha" required>
            </div>
            <div class="mb-3">
                <label for="hora">Hora: </label>
                <input type="text" id="hora" v-model="nuevoEvento.hora" required>
            </div>
            <div class="mb-3">
                <label for="lugar">Lugar: </label>
                <input type="text" id="lugar" v-model="nuevoEvento.lugar" required>
            </div>
            <div class="mb-3">
                <label for="imagen">Imagen: </label>
                <input type="text" id="imagen" v-model="nuevoEvento.imagen" required>
            </div>
            <div class="mb-3">
                <label for="link">Link: </label>
                <input type="text" id="link" v-model="nuevoEvento.link" required>
            </div>
            <button class="mb-3" type="submit">Agregar Evento</button>
        </form>

        <h2 class="mb-3">Lista de Eventos</h2>
        <ul v-if="eventos.length > 0">
            <li v-for="(evento, index) in eventos" :key="evento.id">
                {{ evento.nombre }} (fecha: {{ evento.fecha }}, hora: {{ evento.hora }}, Lugar: {{ evento.lugar }},)
                <a :href="evento.link" target="_blank">Ver evento</a> <br>
                <iframe v-if="evento.imagen" :src="evento.imagen" width="100px" height="auto" allow="fullscreen" style="pointer-events: none;"></iframe>
                <p v-else>No hay imagen disponible</p>
                <br>
                <button @click="editarEvento(index)">Editar</button>
                <button @click="eliminarEvento(index)">Eliminar</button>
            </li>
        </ul>
        <p v-else>No hay eventos registrados.</p>

        <dialog v-if="editandoEvento !== null" open>
            <h2>Editar Evento</h2>
            <form @submit.prevent="guardarEdicion">
                <div>
                    <label for="editNombre">Nombre:</label>
                    <input type="text" id="editNombre" v-model="eventos[editandoEvento].nombre" required>
                </div>
                <div>
                    <label for="editFecha">Fecha:</label>
                    <input type="email" id="editFecha" v-model="eventos[editandoEvento].fecha" required>
                </div>
                <div>
                    <label for="editHora">Hora:</label>
                    <input type="text" id="editHora" v-model="eventos[editandoEvento].hora" required>
                </div>
                <div>
                    <label for="editLugar">Lugar:</label>
                    <input type="text" id="editLugar" v-model="eventos[editandoEvento].lugar" required>
                </div>
                <div>
                    <label for="editLink">Link:</label>
                    <input type="text" id="editLink" v-model="eventos[editandoEvento].link" required>
                </div>
                <div>
                    <label for="editImagen">Link:</label>
                    <input type="text" id="editImagen" v-model="eventos[editandoEvento].imagen" required>
                </div>
                <button type="submit">Guardar</button>
                <button type="button" @click="cancelarEdicion">Cancelar</button>
            </form>
        </dialog>
    </div>

    <script src="js/script.js"></script>
</body>

</html>